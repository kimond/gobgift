{% extends "gobgift/_layout.html" %}
{% load i18n %}
{% load object_utils %}
{% load url from future %}
{%block content%}
    <div class="page-header mdl-shadow--2dp">
        <div class="mdl-grid container-grid">
            <div class="mdl-cell mdl-cell--12-col">
                <h5 class="page-header-title">GobGift > {% trans "My groups" %}</h5>
                <a class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" href="{% url "addGroup" %}">{% trans "Create a group" %}</a>
            </div>
        </div>
    </div>
    {% for group in groups %}
    <div class="mdl-grid container-grid">
        <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col listgroup-card">
            <div class="mdl-card__title mdl-card--expand">
                <h2 class="mdl-card__title-text">{{group.name}}</h2>
            </div>
            <div class="mdl-card__supporting-text">
                <p><b>{% trans "Owner" %}:</b> {{group.owner.first_name}} {{group.owner.last_name}}</p>
                <b>{% trans "Members" %}:</b> {{group.users.all|join:", "}}
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{group.get_view_url}}">{% trans "Show lists" %}</a>
                {% if group.owner == user  or group|args:user|call:"is_user_admin" %}
                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{group.get_edit_url}}">{% trans "Edit" %}</a>
                {% endif %}
                {% if group.owner == user %}
                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="{{group.get_delete_url}}">{% trans "Delete" %}</a>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
{% endblock %}
